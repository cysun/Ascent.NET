CREATE TABLE "AssignmentTemplates" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(100) NOT NULL,
    "Description" text NULL,
    "CourseTemplateId" integer NOT NULL,
    "RubricId" integer NULL,
    "IsPeerReviewed" boolean NOT NULL,
    CONSTRAINT "PK_AssignmentTemplates" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AssignmentTemplates_Rubrics_RubricId" FOREIGN KEY ("RubricId") REFERENCES "Rubrics" ("Id")
);

CREATE TABLE "CourseTemplates" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "CourseId" integer NOT NULL,
    CONSTRAINT "PK_CourseTemplates" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CourseTemplates_Courses_CourseId" FOREIGN KEY ("CourseId") REFERENCES "Courses" ("Id") ON DELETE CASCADE
);

CREATE INDEX "IX_AssignmentTemplates_CourseTemplateId" ON "AssignmentTemplates" ("CourseTemplateId");

CREATE INDEX "IX_AssignmentTemplates_RubricId" ON "AssignmentTemplates" ("RubricId");

CREATE INDEX "IX_CourseTemplates_CourseId" ON "CourseTemplates" ("CourseId");

ALTER TABLE "AssignmentTemplates" ADD CONSTRAINT "FK_AssignmentTemplates_CourseTemplates_CourseTemplateId" FOREIGN KEY ("CourseTemplateId") REFERENCES "CourseTemplates" ("Id") ON DELETE CASCADE;
